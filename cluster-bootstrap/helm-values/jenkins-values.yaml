controller:
  additionalPlugins:
  - job-dsl:1.93

  JCasC:
    enabled: true
    authorizationStrategy: unsecured
    configScripts:
     create-pipeline-job: |
        jobs:
          - script: >
              pipelineJob('app-job') {
                  description('this job was created by job-dsl plugin which was invoked by jcasc')
                  definition { 
                      cpsScm { 
                        scm {
                          git('git@github.com:cemanaral/test-kubernetes-app.git')
                          
                        }                    
                      }
                  }
                  triggers {
                      scm('* * * * *') 
                  }
              }


agent:
  podTemplates: 
    docker-build: |
      - name: docker-build
        label: docker-build
        serviceAccount: jenkins
        runAsGroup: 999
        runAsUser: 1000
        containers:
          - name: docker-build
            image: docker:28.2.2-dind-rootless
            args: "-c 'sleep 9000'"
            command: "/bin/sh"
        volumes:
        - hostPathVolume: 
            hostPath: /var/run/docker.sock
            mountPath: /var/run/docker.sock
